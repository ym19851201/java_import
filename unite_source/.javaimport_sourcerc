let s:unite_javaimport = {
\ "name" : "javaimport",
\ "description": "test example",
\}

function! s:unite_javaimport.gather_candidates(args, context)
  let java = system("which java")
  let java_home = system("readlink ".java)
  let java_home = system("readlink ".java_home)
  let rt_jar = substitute(java_home, "/bin/java", "/lib/rt.jar", "g")

  let jar_tf = systemlist("jar tf ".rt_jar)
  let classes = filter(jar_tf, 'v:val =~ ".*class"')
  let classes = filter(classes, 'v:val !~ "$.*class"')

  return map(classes, '{
\   "word": v:val,
\   "source": "javaimport",
\   "kind": "word",
\ }')
endfunction

call unite#define_source(s:unite_javaimport)
unlet s:unite_javaimport
